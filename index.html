<!DOCTYPE html>
<html lang="ku" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ú•Ø§Ú©Ø±Ø¯Ù† Ù„Û• Ø³ÙØ± ğŸƒâ€â™‚ï¸</title>
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
    
    <style>
        :root {
            --primary: #8b5cf6; /* Ù…Û†Ø± */
            --accent: #f43f5e; /* Ø³ÙˆÙˆØ± */
            --text: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; -webkit-user-select: none; }

        body {
            font-family: 'Vazirmatn', sans-serif;
            overflow: hidden;
            background-color: #111;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            touch-action: manipulation; /* Ú•ÛÚ¯Ø±ÛŒ Ù„Û• Ø²ÙˆÙˆÙ… */
        }

        /* -------------------------------------------
           Ù¡. Ø´ÙˆÛÙ†ÛŒ ÙˆÛÙ†Û•ÛŒ Ú©Û†Ù„ÛÚ˜ (Background)
           Ù„ÛØ±Û• ÙˆÛÙ†Û•Ú©Û•Øª Ø¯Û•Ú¯Û†Ú•ÛŒØª
        ------------------------------------------- */
        .game-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            /* Ù„ÛØ±Û• Ù†Ø§ÙˆÛŒ ÙˆÛÙ†Û•Ú©Û•Øª Ø¨Ù†ÙˆÙˆØ³Û•ØŒ Ù†Ù…ÙˆÙˆÙ†Û•: college.jpg */
            background-image: url('college.jpg'); 
            background-size: cover;
            background-position: center;
            filter: brightness(0.3) blur(2px); /* ØªØ§Ø±ÛŒÚ© Ùˆ ØªÛ•ÚµØ® Ú©Ø±Ø§ÙˆÛ• */
            z-index: -1;
        }

        /* Ú†ÙˆØ§Ø±Ú†ÛÙˆÛ•ÛŒ ÛŒØ§Ø±ÛŒ */
        .game-container {
            width: 100%;
            max-width: 600px;
            height: 300px;
            position: relative;
            border-bottom: 2px solid rgba(255,255,255,0.2);
            overflow: hidden; /* Ø´Ø§Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ Ø¦Û•ÙˆÛ•ÛŒ Ø¯Û•Ú†ÛØªÛ• Ø¯Û•Ø±Û•ÙˆÛ• */
        }

        /* ÛŒØ§Ø±ÛŒØ²Ø§Ù† (ØªÛ•ÚµÛ•Ø¨Û•) */
        #player {
            width: 50px;
            height: 50px;
            font-size: 40px;
            position: absolute;
            bottom: 0;
            left: 20px; /* Ø´ÙˆÛÙ†ÛŒ Ø¬ÛÚ¯ÛŒØ± */
            z-index: 10;
        }

        /* Ø¦Û•Ù†ÛŒÙ…Û•ÛŒØ´Ù†ÛŒ Ø¨Ø§Ø²Ø¯Ø§Ù† */
        .animate-jump {
            animation: jump 0.5s linear;
        }

        @keyframes jump {
            0% { bottom: 0; }
            30% { bottom: 120px; } /* Ø¨Û•Ø±Ø²ÛŒ Ø¨Ø§Ø²Ø¯Ø§Ù† */
            70% { bottom: 120px; }
            100% { bottom: 0; }
        }

        /* Ø¨Û•Ø±Ø¨Û•Ø³Øª (Ú©ØªÛØ¨ Ùˆ Ø³ÙØ±) */
        #obstacle {
            width: 40px;
            height: 40px;
            font-size: 30px;
            position: absolute;
            bottom: 0;
            right: -50px; /* Ø¯Û•Ø³ØªÙ¾ÛÚ© Ù„Û• Ø¯Û•Ø±Û•ÙˆÛ•ÛŒ Ø´Ø§Ø´Û• */
            animation: moveObstacle 1.5s infinite linear; /* Ø®ÛØ±Ø§ÛŒÛŒ */
        }

        /* Ø¬ÙˆÚµÛ•ÛŒ Ø¨Û•Ø±Ø¨Û•Ø³Øª */
        @keyframes moveObstacle {
            0% { right: -50px; }
            100% { right: 100%; }
        }

        /* Ù†Ù…Ø±Û•Ú©Ø§Ù† */
        .score-board {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 1.2rem;
            background: rgba(0,0,0,0.5);
            padding: 5px 15px;
            border-radius: 20px;
            z-index: 20;
        }

        /* Ø´Ø§Ø´Û•ÛŒ Ø¯Û†Ú•Ø§Ù†Ø¯Ù† */
        .game-over-screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            display: none; /* Ø³Û•Ø±Û•ØªØ§ Ø¯ÛŒØ§Ø± Ù†ÛŒÛŒÛ• */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            z-index: 50;
            text-align: center;
            backdrop-filter: blur(5px);
        }

        .btn-restart {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 30px;
            font-size: 1.2rem;
            border-radius: 50px;
            margin-top: 20px;
            cursor: pointer;
            font-family: inherit;
        }

        /* Ø²Û•ÙˆÛŒ (Ù‡ÛÚµÛÚ©) */
        .ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 2px;
            background: white;
            opacity: 0.2;
        }

        /* Ú•ÛÙ†Ù…Ø§ÛŒÛŒ Ø³Û•Ø±Û•ØªØ§ */
        .start-msg {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: rgba(255,255,255,0.7);
            font-size: 1.5rem;
            text-align: center;
            pointer-events: none;
        }

    </style>
</head>
<body onclick="jump()"> 
<div class="game-bg"></div>

    <div class="game-container">
        <div class="score-board">Ù†Ù…Ø±Û•: <span id="scoreSpan">0</span></div>
        
        <div id="player">ğŸƒâ€â™‚ï¸</div>
        
        <div id="obstacle">ğŸ“š</div>

        <div class="ground"></div>
        
        <div class="start-msg" id="startMsg">Ú©Ù„ÛŒÚ© Ø¨Ú©Û• Ø¨Û† Ø¨Ø§Ø²Ø¯Ø§Ù†</div>

        <div class="game-over-screen" id="gameOverMsg">
            <h1 style="color: var(--accent);">Ø®Û•ÙˆØª Ù„ÛÚ©Û•ÙˆØª! ğŸ˜´</h1>
            <p>Ù…Ø§Ù…Û†Ø³ØªØ§ Ù¾ÛÛŒ Ø²Ø§Ù†ÛŒØª...</p>
            <p style="margin-top: 10px; color: #a5b4fc;">Ø®Ø§Úµ: <span id="finalScore">0</span></p>
            <button class="btn-restart" onclick="restartGame(event)">ÛŒØ§Ø±ÛŒ Ú©Ø±Ø¯Ù†Û•ÙˆÛ• ğŸ”„</button>
        </div>
    </div>

    <script>
        var player = document.getElementById("player");
        var obstacle = document.getElementById("obstacle");
        var scoreSpan = document.getElementById("scoreSpan");
        var gameOverMsg = document.getElementById("gameOverMsg");
        var startMsg = document.getElementById("startMsg");
        
        var score = 0;
        var isGameOver = false;
        var gameStarted = false;
        var obstacleTypes = ["ğŸ“š", "ğŸ…¾ï¸", "ğŸ’¤", "ğŸ“"]; // Ø¬Û†Ø±Û•Ú©Ø§Ù†ÛŒ Ø¨Û•Ø±Ø¨Û•Ø³Øª

        // Ø³Û•Ø±Û•ØªØ§ ÛŒØ§Ø±ÛŒÛŒÛ•Ú©Û• Ú•Ø§ÙˆÛ•Ø³ØªØ§ÙˆÛ• (Animation off)
        obstacle.style.animation = "none";

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø¨Ø§Ø²Ø¯Ø§Ù†
        function jump() {
            if(isGameOver) return;

            // Ø¯Û•Ø³ØªÙ¾ÛÚ©Ø±Ø¯Ù†ÛŒ ÛŒØ§Ø±ÛŒ Ù„Û• ÛŒÛ•Ú©Û•Ù… Ú©Ù„ÛŒÚ©
            if (!gameStarted) {
                gameStarted = true;
                startMsg.style.display = "none";
                obstacle.style.animation = "moveObstacle 1.5s infinite linear";
            }

            if(player.classList != "animate-jump"){
                player.classList.add("animate-jump");
                
                // Ù„Ø§Ø¨Ø±Ø¯Ù†ÛŒ Ú©Ù„Ø§Ø³Û•Ú©Û• Ø¯ÙˆØ§ÛŒ 500ms
                setTimeout(function(){
                    player.classList.remove("animate-jump");
                }, 500);
            }
        }

        // Ù¾Ø´Ú©Ù†ÛŒÙ†ÛŒ Ù¾ÛÚ©Ø¯Ø§Ø¯Ø§Ù† (Ù‡Û•Ù…ÙˆÙˆ 10ms Ø¬Ø§Ø±ÛÚ©)
        var checkDead = setInterval(function() {
            if(!gameStarted) return;

            // ÙˆÛ•Ø±Ú¯Ø±ØªÙ†ÛŒ Ø´ÙˆÛÙ†ÛŒ ÛŒØ§Ø±ÛŒØ²Ø§Ù† (Top)
            var playerTop = parseInt(window.getComputedStyle(player).getPropertyValue("top"));
            
            // ÙˆÛ•Ø±Ú¯Ø±ØªÙ†ÛŒ Ø´ÙˆÛÙ†ÛŒ Ø¨Û•Ø±Ø¨Û•Ø³Øª (Left)
            var obstacleLeft = parseInt(window.getComputedStyle(obstacle).getPropertyValue("left"));

            // Ù„Û†Ø¬ÛŒÚ©ÛŒ Ù¾ÛÚ©Ø¯Ø§Ø¯Ø§Ù†
            // Ø¦Û•Ú¯Û•Ø± Ø¨Û•Ø±Ø¨Û•Ø³ØªÛ•Ú©Û• Ú¯Û•ÛŒØ´ØªÛ• Ù„Ø§ÛŒ ÛŒØ§Ø±ÛŒØ²Ø§Ù† (Ù†ÛÙˆØ§Ù† 0 Ùˆ 40px)
            // ÙˆÛ• ÛŒØ§Ø±ÛŒØ²Ø§Ù†Û•Ú©Û• Ù„Û• Ø®ÙˆØ§Ø±Û•ÙˆÛ• Ø¨ÙˆÙˆ (Ø¨Ø§Ø²ÛŒÙ†Û•Ø¯Ø§Ø¨ÙˆÙˆ >= 250)
            // Ú˜Ù…Ø§Ø±Û•Ú©Ø§Ù† Ø¯Û•Ú¯ÙˆÙ†Ø¬ÛÙ†Ø¯Ø±ÛÙ† Ø¨Û•Ù¾ÛÛŒ Ø¨Û•Ø±Ø²ÛŒ container (300px)
            
            // Player height is ~50px, Container is 300px. Bottom 0 means top is 250px.
            if(obstacleLeft < 40 && obstacleLeft > 0 && playerTop >= 250){
                gameOver();
            } else {
                // Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ù†Ù…Ø±Û•
                score++;
                if(score % 10 == 0) { // Ø¨Û† Ø¦Û•ÙˆÛ•ÛŒ Ø²Û†Ø± Ø®ÛØ±Ø§ Ù†Û•Ú•ÙˆØ§Øª
                    scoreSpan.innerText = Math.floor(score / 10);
                }
            }

        }, 10);

        // Ú¯Û†Ú•ÛŒÙ†ÛŒ Ø´ÛÙˆÛ•ÛŒ Ø¨Û•Ø±Ø¨Û•Ø³ØªÛ•Ú©Û• Ù‡Û•Ø± Ø¬Ø§Ø±ÛÚ© Ø¯ÛØªÛ•ÙˆÛ• Ø³Û•Ø±Û•ØªØ§
        obstacle.addEventListener('animationiteration', () => {
            var randomType = obstacleTypes[Math.floor(Math.random() * obstacleTypes.length)];
            obstacle.innerText = randomType;
            
            // Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø®ÛØ±Ø§ÛŒÛŒ Ú©Û•Ù…ÛÚ©
            // (Ù„ÛØ±Û• Ø¯Û•ØªÙˆØ§Ù†ÛŒ Ú©Û†Ø¯ Ø²ÛŒØ§Ø¯ Ø¨Ú©Û•ÛŒØª Ø¨Û† Ø®ÛØ±Ø§Ú©Ø±Ø¯Ù†)
        });

        function gameOver() {
            isGameOver = true;
            obstacle.style.animation = "none";
            obstacle.style.display = "none";
            gameOverMsg.style.display = "flex";
            document.getElementById("finalScore").innerText = Math.floor(score / 10);
        }

        function restartGame(e) {
            e.stopPropagation(); // Ú•ÛÚ¯Ø±ÛŒ Ù„Û• Ø¨Ø§Ø²Ø¯Ø§Ù†ÛŒ Ù‡Û•ÚµÛ•
            location.reload();
        }
        
        // Ø¨Û† Ø¦Û•ÙˆÛ•ÛŒ Ø¨Û• Space Bar Ø¨Ø§Ø² Ø¨Ø¯Ø§Øª
        document.body.onkeyup = function(e){
            if(e.keyCode == 32){
                jump();
            }
        }

    </script>
</body>
</html>
